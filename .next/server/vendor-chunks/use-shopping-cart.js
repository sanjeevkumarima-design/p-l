/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/use-shopping-cart";
exports.ids = ["vendor-chunks/use-shopping-cart"];
exports.modules = {

/***/ "(ssr)/./node_modules/use-shopping-cart/dist/react.js":
/*!******************************************************!*\
  !*** ./node_modules/use-shopping-cart/dist/react.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n'use client';\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n\nvar React = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\nvar toolkit = __webpack_require__(/*! @reduxjs/toolkit */ \"(ssr)/./node_modules/@reduxjs/toolkit/dist/index.js\");\nvar dateFns = __webpack_require__(/*! date-fns */ \"(ssr)/./node_modules/date-fns/index.js\");\nvar uuid = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm-node/index.js\");\nvar reduxPersist = __webpack_require__(/*! redux-persist */ \"(ssr)/./node_modules/redux-persist/lib/index.js\");\n__webpack_require__(/*! @stripe/stripe-js */ \"(ssr)/./node_modules/@stripe/stripe-js/dist/stripe.js\");\nvar reactRedux = __webpack_require__(/*! react-redux */ \"(ssr)/./node_modules/react-redux/lib/index.js\");\nvar react = __webpack_require__(/*! redux-persist/integration/react */ \"(ssr)/./node_modules/redux-persist/lib/integration/react.js\");\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () { return e[k]; }\n        });\n      }\n    });\n  }\n  n[\"default\"] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nconst isClient = typeof window === 'object';\n\nconst formatCurrencyString = ({\r\n  value,\r\n  currency,\r\n  language = isClient ? navigator.language : 'en-US'\r\n}) => {\r\n  const numberFormat = new Intl.NumberFormat(language, {\r\n    style: 'currency',\r\n    currency,\r\n    currencyDisplay: 'symbol'\r\n  });\r\n  const parts = numberFormat.formatToParts(value);\r\n  let zeroDecimalCurrency = true;\r\n\r\n  for (const part of parts) {\r\n    if (part.type === 'decimal') {\r\n      zeroDecimalCurrency = false;\r\n      break\r\n    }\r\n  }\r\n\r\n  value = zeroDecimalCurrency ? value : parseFloat((value / 100).toFixed(2));\r\n  return numberFormat.format(value)\r\n};\r\n\r\nfunction updateFormattedTotalPrice(state) {\r\n  state.formattedTotalPrice = formatCurrencyString({\r\n    value: state.totalPrice,\r\n    currency: state.currency,\r\n    language: state.language\r\n  });\r\n}\r\n\r\nfunction updateFormattedValue(state, id) {\r\n  state.cartDetails[id].formattedValue = formatCurrencyString({\r\n    value: state.cartDetails[id].value,\r\n    currency: state.currency,\r\n    language: state.language\r\n  });\r\n}\r\n\r\nfunction updateFormattedPrice(state, id) {\r\n  state.cartDetails[id].formattedPrice = formatCurrencyString({\r\n    value: state.cartDetails[id].price,\r\n    currency: state.currency,\r\n    language: state.language\r\n  });\r\n}\r\n\r\nfunction Entry({ id, product, quantity, price_metadata, product_metadata }) {\r\n  return {\r\n    ...product,\r\n    id,\r\n    quantity,\r\n    value: product.price * quantity,\r\n    timestamp: new Date().toISOString(), // add a timestamp in ISO 8601 format\r\n    price_data: {\r\n      ...product.price_data,\r\n      ...price_metadata\r\n    },\r\n    product_data: {\r\n      ...product.product_data,\r\n      ...product_metadata\r\n    }\r\n  }\r\n}\r\n\r\nfunction createEntry({\r\n  state,\r\n  id,\r\n  product,\r\n  count,\r\n  price_metadata,\r\n  product_metadata\r\n}) {\r\n  const entry = Entry({\r\n    id,\r\n    product,\r\n    quantity: count,\r\n    price_metadata,\r\n    product_metadata,\r\n    timestamp: dateFns.formatISO(new Date())\r\n  });\r\n\r\n  state.cartDetails[id] = entry;\r\n  updateFormattedValue(state, id);\r\n  updateFormattedPrice(state, id);\r\n\r\n  state.totalPrice += entry.value;\r\n  state.cartCount += count;\r\n  updateFormattedTotalPrice(state);\r\n}\r\n\r\nfunction updateEntry({\r\n  state,\r\n  id,\r\n  count,\r\n  price_metadata,\r\n  product_metadata\r\n}) {\r\n  const entry = state.cartDetails[id];\r\n  if (entry.quantity + count <= 0) return removeEntry({ state, id })\r\n\r\n  state.cartDetails[id] = Entry({\r\n    id,\r\n    state,\r\n    product: entry,\r\n    quantity: entry.quantity + count,\r\n    price_metadata,\r\n    product_metadata\r\n  });\r\n  updateFormattedValue(state, id);\r\n\r\n  state.totalPrice += entry.price * count;\r\n  state.cartCount += count;\r\n  updateFormattedTotalPrice(state);\r\n}\r\n\r\nfunction removeEntry({ state, id }) {\r\n  const cartDetails = state.cartDetails;\r\n  state.totalPrice -= cartDetails[id].value;\r\n  state.cartCount -= cartDetails[id].quantity;\r\n  delete cartDetails[id];\r\n  updateFormattedTotalPrice(state);\r\n}\r\n\r\nfunction updateQuantity({ state, id, quantity }) {\r\n  const entry = state.cartDetails[id];\r\n  updateEntry({\r\n    state,\r\n    id,\r\n    count: quantity - entry.quantity\r\n  });\r\n}\n\nconst initialState = {\r\n  cartMode: 'checkout-session',\r\n  mode: 'payment',\r\n  currency: 'USD',\r\n  language: isClient ? navigator.language : 'en-US',\r\n  lastClicked: '',\r\n  shouldDisplayCart: false,\r\n  cartCount: 0,\r\n  totalPrice: 0,\r\n  formattedTotalPrice: '',\r\n  cartDetails: {},\r\n  stripe: '',\r\n  shouldPersist: true\r\n};\r\n\r\nconst slice = toolkit.createSlice({\r\n  name: 'cart',\r\n  initialState,\r\n  reducers: {\r\n    addItem: {\r\n      reducer(state, { payload: { product, options } }) {\r\n        const { count, price_metadata, product_metadata } = options;\r\n\r\n        const id =\r\n          product.id ||\r\n          product.price_id ||\r\n          product.sku_id ||\r\n          product.sku ||\r\n          uuid.v4();\r\n\r\n        if (id in state.cartDetails) {\r\n          updateEntry({\r\n            state,\r\n            id,\r\n            count,\r\n            price_metadata,\r\n            product_metadata\r\n          });\r\n        } else {\r\n          createEntry({\r\n            state,\r\n            id,\r\n            product,\r\n            count,\r\n            price_metadata,\r\n            product_metadata\r\n          });\r\n        }\r\n      },\r\n      prepare(product, options = { count: 1 }) {\r\n        if (!options.price_metadata) options.price_metadata = {};\r\n        if (!options.product_metadata) options.product_metadata = {};\r\n        if (!options.count) options.count = 1;\r\n        return { payload: { product, options } }\r\n      }\r\n    },\r\n    incrementItem: {\r\n      reducer(state, { payload: { id, options } }) {\r\n        updateEntry({\r\n          state,\r\n          id,\r\n          count: options.count\r\n        });\r\n      },\r\n      prepare(id, options = { count: 1 }) {\r\n        return { payload: { id, options } }\r\n      }\r\n    },\r\n    decrementItem: {\r\n      reducer(state, { payload: { id, options } }) {\r\n        if (state.cartDetails[id].quantity - options.count <= 0)\r\n          return removeEntry({ state, id })\r\n\r\n        updateEntry({\r\n          state,\r\n          id,\r\n          count: -options.count\r\n        });\r\n      },\r\n      prepare(id, options = { count: 1 }) {\r\n        return { payload: { id, options } }\r\n      }\r\n    },\r\n    clearCart: {\r\n      reducer(state) {\r\n        state.cartCount = 0;\r\n        state.totalPrice = 0;\r\n        state.cartDetails = {};\r\n        updateFormattedTotalPrice(state);\r\n      }\r\n    },\r\n    setItemQuantity: {\r\n      reducer(state, { payload: { id, quantity } }) {\r\n        if (quantity > 0 && id in state.cartDetails)\r\n          return updateQuantity({ ...state, state, id, quantity })\r\n        else if (quantity === 0) return removeEntry({ state, id })\r\n      },\r\n      prepare(id, quantity) {\r\n        return { payload: { id, quantity } }\r\n      }\r\n    },\r\n    removeItem: {\r\n      reducer(state, { payload: { id } }) {\r\n        removeEntry({ state, id });\r\n      },\r\n      prepare(id) {\r\n        return { payload: { id } }\r\n      }\r\n    },\r\n    loadCart: {\r\n      reducer(state, { payload: { cartDetails, shouldMerge } }) {\r\n        if (!shouldMerge) {\r\n          state.cartCount = 0;\r\n          state.totalPrice = 0;\r\n          state.cartDetails = {};\r\n        }\r\n\r\n        for (const id in cartDetails) {\r\n          const entry = cartDetails[id];\r\n          createEntry({\r\n            state,\r\n            id: entry.id,\r\n            product: entry,\r\n            count: entry.quantity\r\n          });\r\n        }\r\n      },\r\n      prepare(cartDetails, shouldMerge = true) {\r\n        return { payload: { cartDetails, shouldMerge } }\r\n      }\r\n    },\r\n    handleCartHover(state) {\r\n      state.shouldDisplayCart = true;\r\n    },\r\n    handleCartClick(state) {\r\n      state.shouldDisplayCart = !state.shouldDisplayCart;\r\n    },\r\n    handleCloseCart(state) {\r\n      state.shouldDisplayCart = false;\r\n    },\r\n    storeLastClicked(state, { payload }) {\r\n      state.lastClicked = payload;\r\n    },\r\n    changeStripeKey(state, { payload }) {\r\n      state.stripe = payload;\r\n    },\r\n    changeLanguage(state, { payload }) {\r\n      state.language = payload;\r\n    },\r\n    changeCurrency(state, { payload }) {\r\n      state.currency = payload;\r\n    }\r\n  }\r\n});\r\n\r\nslice.actions.redirectToCheckout = (sessionId) => ({\r\n  type: 'cart/redirectToCheckout',\r\n  payload: { sessionId }\r\n});\r\nslice.actions.checkoutSingleItem = (itemsOrPriceId) => {\r\n  const quantity = itemsOrPriceId.quantity || 1;\r\n\r\n  const cartItems = (() => {\r\n    if (typeof itemsOrPriceId === 'string') {\r\n      return {\r\n        lineItems: [\r\n          {\r\n            price: itemsOrPriceId,\r\n            quantity\r\n          }\r\n        ]\r\n      }\r\n    }\r\n    if (Object.prototype.hasOwnProperty.call(itemsOrPriceId, 'price')) {\r\n      return {\r\n        lineItems: [\r\n          {\r\n            price: itemsOrPriceId.price,\r\n            quantity\r\n          }\r\n        ]\r\n      }\r\n    }\r\n    /**\r\n     * Backward compatibility (SKU)\r\n     */\r\n    if (Object.prototype.hasOwnProperty.call(itemsOrPriceId, 'sku')) {\r\n      return {\r\n        items: [\r\n          {\r\n            sku: itemsOrPriceId.sku,\r\n            quantity\r\n          }\r\n        ]\r\n      }\r\n    }\r\n    return []\r\n  })();\r\n\r\n  return {\r\n    type: 'cart/checkoutSingleItem',\r\n    payload: {\r\n      cartItems\r\n    }\r\n  }\r\n};\r\n\r\nconst { reducer, actions } = slice;\n\n/**\r\n * Returns the constructor name of any value.\r\n * @param {any} value\r\n * @returns string\r\n */\r\nfunction typeOf(value) {\r\n  if (value === undefined) return 'undefined'\r\n  if (value === null) return 'null'\r\n  return value.constructor.name\r\n}\r\n\r\nclass PropertyValueError extends Error {\r\n  constructor({ property, method, expected, received }) {\r\n    const plural = Array.isArray(expected);\r\n    const expectedString = plural\r\n      ? `are ${expected.map((v) => JSON.stringify(v)).join(', ')}`\r\n      : `is ${JSON.stringify(expected)}`;\r\n    const methodString = typeof method === 'string' ? ` in ${method}()` : '';\r\n    super(\r\n      `Invalid value ${JSON.stringify(\r\n        received\r\n      )} was received for ${property}. Valid ${\r\n        plural ? 'values' : 'value'\r\n      } for ${property}${methodString} ${expectedString}.`\r\n    );\r\n    this.name = 'PropertyValueError';\r\n  }\r\n}\r\n\r\nclass PropertyTypeError extends TypeError {\r\n  constructor({ property, expected, received }) {\r\n    const plural = Array.isArray(expected);\r\n    const expectedString = plural\r\n      ? `are ${expected.map((v) => JSON.stringify(v)).join(', ')}`\r\n      : `is ${JSON.stringify(expected)}`;\r\n    super(\r\n      `Invalid value with type ${JSON.stringify(\r\n        received\r\n      )} was received for ${property}. Valid ${\r\n        plural ? 'types' : 'type'\r\n      } for ${property} ${expectedString}.`\r\n    );\r\n    this.name = 'PropertyTypeError';\r\n  }\r\n}\r\n\r\nclass PropertyRangeError extends RangeError {\r\n  constructor({ property, between, below, above, received }) {\r\n    let expectedString;\r\n    if (Array.isArray(between))\r\n      expectedString = `between ${between[0]} and ${between[1]}`;\r\n    else if (['string', 'number'].includes(typeof below))\r\n      expectedString = `below ${below}`;\r\n    else if (['string', 'number'].includes(typeof above))\r\n      expectedString = `above ${above}`;\r\n\r\n    super(\r\n      `Invalid value ${JSON.stringify(\r\n        received\r\n      )} was received for ${property}. Valid range for ${property} is ${expectedString}.`\r\n    );\r\n    this.name = 'PropertyRangeError';\r\n  }\r\n}\n\nfunction _optionalChain(ops) { let lastAccessLHS = undefined; let value = ops[0]; let i = 1; while (i < ops.length) { const op = ops[i]; const fn = ops[i + 1]; i += 2; if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) { return undefined; } if (op === 'access' || op === 'optionalAccess') { lastAccessLHS = value; value = fn(value); } else if (op === 'call' || op === 'optionalCall') { value = fn((...args) => value.call(lastAccessLHS, ...args)); lastAccessLHS = undefined; } } return value; }\r\nfunction getCheckoutData(cart) {\r\n  const lineItems = [];\r\n  for (const sku in cart.cartDetails)\r\n    lineItems.push({ price: sku, quantity: cart.cartDetails[sku].quantity });\r\n\r\n  const options = {\r\n    mode: cart.mode,\r\n    lineItems,\r\n    successUrl: cart.successUrl,\r\n    cancelUrl: cart.cancelUrl,\r\n    billingAddressCollection: cart.billingAddressCollection\r\n      ? 'required'\r\n      : 'auto',\r\n    submitType: 'auto'\r\n  };\r\n\r\n  if (_optionalChain([cart, 'access', _ => _.allowedCountries, 'optionalAccess', _2 => _2.length])) {\r\n    options.shippingAddressCollection = {\r\n      allowedCountries: cart.allowedCountries\r\n    };\r\n  }\r\n\r\n  return options\r\n}\r\n\r\nconst handleStripe = (store) => (next) => async (action) => {\r\n  const stripePublicKey = store.getState().stripe;\r\n  const cart = store.getState();\r\n\r\n  const checkout = ['cart/redirectToCheckout', 'cart/checkoutSingleItem'];\r\n  if (checkout.includes(action.type)) {\r\n    if (typeof stripePublicKey !== 'string') {\r\n      throw new PropertyTypeError({\r\n        property: 'stripe',\r\n        expected: 'string',\r\n        received: typeOf(stripePublicKey)\r\n      })\r\n    } else if (stripePublicKey.length === 0) {\r\n      throw new PropertyRangeError({\r\n        property: 'stripe.length',\r\n        above: 0,\r\n        received: stripePublicKey.length\r\n      })\r\n    }\r\n  }\r\n\r\n  if (action.type === 'cart/redirectToCheckout') {\r\n    const stripe = initializeStripe(stripePublicKey);\r\n    if (cart.cartMode === 'checkout-session') {\r\n      return stripe.redirectToCheckout({\r\n        sessionId: action.payload.sessionId\r\n      })\r\n    } else if (cart.cartMode === 'client-only') {\r\n      const checkoutData = getCheckoutData(cart);\r\n      return stripe.redirectToCheckout(checkoutData)\r\n    } else {\r\n      throw new PropertyValueError({\r\n        property: 'cartMode',\r\n        method: 'redirectToCheckout',\r\n        expected: ['client-only', 'checkout-session'],\r\n        received: cart.cartMode\r\n      })\r\n    }\r\n  } else if (action.type === 'cart/checkoutSingleItem') {\r\n    const stripe = initializeStripe(stripePublicKey);\r\n\r\n    if (cart.cartMode === 'client-only') {\r\n      const options = {\r\n        mode: cart.mode,\r\n        successUrl: cart.successUrl,\r\n        cancelUrl: cart.cancelUrl,\r\n        ...action.payload.cartItems\r\n      };\r\n      return stripe.redirectToCheckout(options)\r\n    } else {\r\n      throw new PropertyValueError({\r\n        property: 'cartMode',\r\n        method: 'checkoutSingleItem',\r\n        expected: 'client-only',\r\n        received: cart.cartMode\r\n      })\r\n    }\r\n  }\r\n\r\n  return next(action)\r\n};\r\n\r\nfunction initializeStripe(publicKey) {\r\n  try {\r\n    // eslint-disable-next-line no-undef\r\n    const stripe = Stripe(publicKey);\r\n    stripe.registerAppInfo({\r\n      name: 'use-shopping-cart',\r\n      version: \"3.2.0\",\r\n      url: 'https://useshoppingcart.com',\r\n      // eslint-disable-next-line camelcase\r\n      partner_id: 'pp_partner_H8MLmI3e9Oc3IK'\r\n    });\r\n    return stripe\r\n  } catch (error) {\r\n    console.error('Unable to initialize Stripe.');\r\n    throw error\r\n  }\r\n}\n\nconst handleWarnings = (store) => (next) => async (action) => {\r\n  const count = ['cart/addItem', 'cart/incrementItem', 'cart/decrementItem'];\r\n  if (\r\n    count.includes(action.type) &&\r\n    typeof action.payload.options.count !== 'number'\r\n  ) {\r\n    console.warn(\r\n      `Invalid count used with action ${\r\n        action.type\r\n      }: count must be a number. The current type is ${typeOf(\r\n        action.payload.options.count\r\n      )}.`,\r\n      action\r\n    );\r\n    return\r\n  }\r\n\r\n  const quantity = ['cart/setItemQuantity'];\r\n  if (quantity.includes(action.type)) {\r\n    if (typeof action.payload.quantity !== 'number') {\r\n      console.warn(\r\n        `Invalid quantity used with action ${\r\n          action.type\r\n        }: quantity must be a number. The current type is ${typeOf(\r\n          action.payload.quantity\r\n        )}.`,\r\n        action\r\n      );\r\n      return\r\n    } else if (action.payload.quantity < 0) {\r\n      console.warn(\r\n        `Invalid quantity used with action ${\r\n          action.type\r\n        }: quantity must be greater than zero. The current value is ${JSON.stringify(\r\n          action.payload.quantity\r\n        )}.`,\r\n        action\r\n      );\r\n      return\r\n    }\r\n  }\r\n\r\n  const id = ['cart/incrementItem', 'cart/decrementItem', 'cart/removeItem'];\r\n  if (\r\n    id.includes(action.type) &&\r\n    !(action.payload.id in store.getState().cartDetails)\r\n  ) {\r\n    console.warn(\r\n      `Invalid product ID used with action ${\r\n        action.type\r\n      }: the ID must already be in the cart. The current value is ${JSON.stringify(\r\n        action.payload.id\r\n      )}.`,\r\n      action\r\n    );\r\n    return\r\n  }\r\n\r\n  return next(action)\r\n};\n\nfunction _nullishCoalesce(lhs, rhsFn) { if (lhs != null) { return lhs; } else { return rhsFn(); } }\r\nasync function filterCart(cartDetails, filter) {\r\n  const filteredCart = {};\r\n\r\n  for (const sku in cartDetails) {\r\n    const entry = cartDetails[sku];\r\n    if (await filter(entry)) filteredCart[sku] = entry;\r\n  }\r\n\r\n  return filteredCart\r\n}\r\n\r\nfunction noop() {}\r\nfunction createNoopStorage() {\r\n  return {\r\n    getItem: noop,\r\n    setItem: noop,\r\n    removeItem: noop\r\n  }\r\n}\r\n\r\nfunction createLocalStorage() {\r\n  return {\r\n    async getItem(key) {\r\n      return window.localStorage.getItem(key)\r\n    },\r\n    async setItem(key, value) {\r\n      return window.localStorage.setItem(key, value)\r\n    },\r\n    async removeItem(key) {\r\n      return window.localStorage.removeItem(key)\r\n    }\r\n  }\r\n}\r\n\r\nfunction createShoppingCartStore(options) {\r\n  options.shouldPersist = _nullishCoalesce(options.shouldPersist, () => ( true));\r\n\r\n  if (!isClient) {\r\n    return toolkit.configureStore({\r\n      reducer,\r\n      preloadedState: { ...initialState, ...options }\r\n    })\r\n  }\r\n  let storage;\r\n  if (isClient) storage = options.storage || createLocalStorage();\r\n  else storage = createNoopStorage();\r\n  delete options.storage;\r\n\r\n  const persistConfig = {\r\n    key: _nullishCoalesce(options.persistKey, () => ( 'root')),\r\n    version: 1,\r\n    storage,\r\n    whitelist: ['cartCount', 'totalPrice', 'formattedTotalPrice', 'cartDetails']\r\n  };\r\n  const persistedReducer = reduxPersist.persistReducer(persistConfig, reducer);\r\n\r\n  const newInitialState = { ...initialState, ...options };\r\n  updateFormattedTotalPrice(newInitialState);\r\n\r\n  return toolkit.configureStore({\r\n    reducer: options.shouldPersist ? persistedReducer : reducer,\r\n    preloadedState: newInitialState,\r\n    middleware: (getDefaultMiddleware) =>\r\n      getDefaultMiddleware({\r\n        serializableCheck: {\r\n          ignoredActions: [reduxPersist.FLUSH, reduxPersist.REHYDRATE, reduxPersist.PAUSE, reduxPersist.PERSIST, reduxPersist.PURGE, reduxPersist.REGISTER],\r\n          ignoredActionPaths: ['persist']\r\n        }\r\n      }).concat(handleStripe, handleWarnings)\r\n  })\r\n}\n\nconst _jsxFileName = \"/Users/nickdejesus/Code/hooks/use-shopping-cart/use-shopping-cart/react/index.js\";const CartContext = React__namespace.createContext(initialState);\r\nconst useSelector = reactRedux.createSelectorHook(CartContext);\r\nconst useDispatch = reactRedux.createDispatchHook(CartContext);\r\n\r\nfunction CartProvider({ loading = null, children, ...props }) {\r\n  const [isClient, setIsClient] = React__namespace.useState(false);\r\n\r\n  React__namespace.useEffect(() => {\r\n    setIsClient(true);\r\n  }, []);\r\n\r\n  const store = React__namespace.useMemo(() => createShoppingCartStore(props), [props]);\r\n\r\n  if (props.shouldPersist && isClient) {\r\n    const persistor = reduxPersist.persistStore(store);\r\n\r\n    return (\r\n      React__namespace.createElement(reactRedux.Provider, { context: CartContext, store: store, __self: this, __source: {fileName: _jsxFileName, lineNumber: 33}}\n        , React__namespace.createElement(react.PersistGate, { persistor: persistor, __self: this, __source: {fileName: _jsxFileName, lineNumber: 34}}, () => children)\n      )\r\n    )\r\n  } else {\r\n    return (\r\n      React__namespace.createElement(reactRedux.Provider, { context: CartContext, store: store, __self: this, __source: {fileName: _jsxFileName, lineNumber: 39}}\n        , children\n      )\r\n    )\r\n  }\r\n}\r\n\r\nfunction useShoppingCart(\r\n  selector = (state) => ({ ...state }),\r\n  equalityFn\r\n) {\r\n  const dispatch = useDispatch();\r\n  const cartState = useSelector(selector, equalityFn);\r\n\r\n  const shoppingCart = React__namespace.useMemo(() => {\r\n    const cartActions = toolkit.bindActionCreators(actions, dispatch);\r\n    return { ...cartState, ...cartActions }\r\n  }, [cartState, dispatch]);\r\n\r\n  React__namespace.useDebugValue(shoppingCart);\r\n  return shoppingCart\r\n}\r\n\r\nfunction DebugCart(props) {\r\n  const cart = useShoppingCart((state) => state);\r\n  const cartPropertyRows = Object.entries(cart)\r\n    .filter(([, value]) => typeof value !== 'function')\r\n    .map(([key, value]) => (\r\n      React__namespace.createElement('tr', { key: key, __self: this, __source: {fileName: _jsxFileName, lineNumber: 67}}\n        , React__namespace.createElement('td', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 68}}, key)\n        , React__namespace.createElement('td', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 69}}\n          , typeof value === 'object' ? (\r\n            React__namespace.createElement('button', { onClick: () => console.log(value), __self: this, __source: {fileName: _jsxFileName, lineNumber: 71}}, \"Log value\" )\r\n          ) : (\r\n            JSON.stringify(value)\r\n          )\n        )\n      )\r\n    ));\r\n\r\n  return (\r\n    React__namespace.createElement('div', {\r\n      style: {\r\n        position: 'fixed',\r\n        top: 50,\r\n        right: 50,\r\n        backgroundColor: '#eee',\r\n        textAlign: 'left',\r\n        maxWidth: 300,\r\n        padding: 20,\r\n        borderSpacing: '25px 5px',\r\n        overflow: 'auto'\r\n      },\r\n      ...props, __self: this, __source: {fileName: _jsxFileName, lineNumber: 80}}\r\n\n      , React__namespace.createElement('table', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 94}}\n        , React__namespace.createElement('thead', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 95}}\n          , React__namespace.createElement('tr', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 96}}\n            , React__namespace.createElement('th', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 97}}, \"Key\")\n            , React__namespace.createElement('th', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 98}}, \"Value\")\n          )\n        )\n        , React__namespace.createElement('tbody', {__self: this, __source: {fileName: _jsxFileName, lineNumber: 101}}, cartPropertyRows)\n      )\n    )\r\n  )\r\n}\n\nexports.CartContext = CartContext;\nexports.CartProvider = CartProvider;\nexports.DebugCart = DebugCart;\nexports.actions = actions;\nexports.filterCart = filterCart;\nexports.formatCurrencyString = formatCurrencyString;\nexports.useDispatch = useDispatch;\nexports.useSelector = useSelector;\nexports.useShoppingCart = useShoppingCart;\n//# sourceMappingURL=react.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXNlLXNob3BwaW5nLWNhcnQvZGlzdC9yZWFjdC5qcyIsIm1hcHBpbmdzIjoiO0FBQ0E7QUFDQTs7QUFFQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7O0FBRTdELFlBQVksbUJBQU8sQ0FBQyx3R0FBTztBQUMzQixjQUFjLG1CQUFPLENBQUMsNkVBQWtCO0FBQ3hDLGNBQWMsbUJBQU8sQ0FBQyx3REFBVTtBQUNoQyxXQUFXLG1CQUFPLENBQUMsOERBQU07QUFDekIsbUJBQW1CLG1CQUFPLENBQUMsc0VBQWU7QUFDMUMsbUJBQU8sQ0FBQyxnRkFBbUI7QUFDM0IsaUJBQWlCLG1CQUFPLENBQUMsa0VBQWE7QUFDdEMsWUFBWSxtQkFBTyxDQUFDLG9HQUFpQzs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsaUJBQWlCLHlEQUF5RDtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNB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QXlCO0FBQ3pFO0FBQ0EsdURBQXVELDREQUE0RCx3Q0FBd0M7QUFDM0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AseUNBQXlDOztBQUV6QyxpREFBaUQseUJBQXlCO0FBQzFFLG1EQUFtRCx5QkFBeUI7QUFDNUUsa0RBQWtELHlCQUF5QjtBQUMzRSxvREFBb0QseUJBQXlCLHdDQUF3QztBQUNySCxvREFBb0QseUJBQXlCLHdDQUF3QztBQUNySDtBQUNBO0FBQ0EsbURBQW1ELHlCQUF5Qix5Q0FBeUM7QUFDckg7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CO0FBQ25CLG9CQUFvQjtBQUNwQixpQkFBaUI7QUFDakIsZUFBZTtBQUNmLGtCQUFrQjtBQUNsQiw0QkFBNEI7QUFDNUIsbUJBQW1CO0FBQ25CLG1CQUFtQjtBQUNuQix1QkFBdUI7QUFDdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9kdWN0LWxpc3RpbmcvLi9ub2RlX21vZHVsZXMvdXNlLXNob3BwaW5nLWNhcnQvZGlzdC9yZWFjdC5qcz83MTRiIl0sInNvdXJjZXNDb250ZW50IjpbIlxuJ3VzZSBjbGllbnQnO1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIHRvb2xraXQgPSByZXF1aXJlKCdAcmVkdXhqcy90b29sa2l0Jyk7XG52YXIgZGF0ZUZucyA9IHJlcXVpcmUoJ2RhdGUtZm5zJyk7XG52YXIgdXVpZCA9IHJlcXVpcmUoJ3V1aWQnKTtcbnZhciByZWR1eFBlcnNpc3QgPSByZXF1aXJlKCdyZWR1eC1wZXJzaXN0Jyk7XG5yZXF1aXJlKCdAc3RyaXBlL3N0cmlwZS1qcycpO1xudmFyIHJlYWN0UmVkdXggPSByZXF1aXJlKCdyZWFjdC1yZWR1eCcpO1xudmFyIHJlYWN0ID0gcmVxdWlyZSgncmVkdXgtcGVyc2lzdC9pbnRlZ3JhdGlvbi9yZWFjdCcpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcE5hbWVzcGFjZShlKSB7XG4gIGlmIChlICYmIGUuX19lc01vZHVsZSkgcmV0dXJuIGU7XG4gIHZhciBuID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgaWYgKGUpIHtcbiAgICBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICBpZiAoayAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgIHZhciBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCBrKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIGssIGQuZ2V0ID8gZCA6IHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZVtrXTsgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBuW1wiZGVmYXVsdFwiXSA9IGU7XG4gIHJldHVybiBPYmplY3QuZnJlZXplKG4pO1xufVxuXG52YXIgUmVhY3RfX25hbWVzcGFjZSA9IC8qI19fUFVSRV9fKi9faW50ZXJvcE5hbWVzcGFjZShSZWFjdCk7XG5cbmNvbnN0IGlzQ2xpZW50ID0gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCc7XG5cbmNvbnN0IGZvcm1hdEN1cnJlbmN5U3RyaW5nID0gKHtcclxuICB2YWx1ZSxcclxuICBjdXJyZW5jeSxcclxuICBsYW5ndWFnZSA9IGlzQ2xpZW50ID8gbmF2aWdhdG9yLmxhbmd1YWdlIDogJ2VuLVVTJ1xyXG59KSA9PiB7XHJcbiAgY29uc3QgbnVtYmVyRm9ybWF0ID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxhbmd1YWdlLCB7XHJcbiAgICBzdHlsZTogJ2N1cnJlbmN5JyxcclxuICAgIGN1cnJlbmN5LFxyXG4gICAgY3VycmVuY3lEaXNwbGF5OiAnc3ltYm9sJ1xyXG4gIH0pO1xyXG4gIGNvbnN0IHBhcnRzID0gbnVtYmVyRm9ybWF0LmZvcm1hdFRvUGFydHModmFsdWUpO1xyXG4gIGxldCB6ZXJvRGVjaW1hbEN1cnJlbmN5ID0gdHJ1ZTtcclxuXHJcbiAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XHJcbiAgICBpZiAocGFydC50eXBlID09PSAnZGVjaW1hbCcpIHtcclxuICAgICAgemVyb0RlY2ltYWxDdXJyZW5jeSA9IGZhbHNlO1xyXG4gICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFsdWUgPSB6ZXJvRGVjaW1hbEN1cnJlbmN5ID8gdmFsdWUgOiBwYXJzZUZsb2F0KCh2YWx1ZSAvIDEwMCkudG9GaXhlZCgyKSk7XHJcbiAgcmV0dXJuIG51bWJlckZvcm1hdC5mb3JtYXQodmFsdWUpXHJcbn07XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVGb3JtYXR0ZWRUb3RhbFByaWNlKHN0YXRlKSB7XHJcbiAgc3RhdGUuZm9ybWF0dGVkVG90YWxQcmljZSA9IGZvcm1hdEN1cnJlbmN5U3RyaW5nKHtcclxuICAgIHZhbHVlOiBzdGF0ZS50b3RhbFByaWNlLFxyXG4gICAgY3VycmVuY3k6IHN0YXRlLmN1cnJlbmN5LFxyXG4gICAgbGFuZ3VhZ2U6IHN0YXRlLmxhbmd1YWdlXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUZvcm1hdHRlZFZhbHVlKHN0YXRlLCBpZCkge1xyXG4gIHN0YXRlLmNhcnREZXRhaWxzW2lkXS5mb3JtYXR0ZWRWYWx1ZSA9IGZvcm1hdEN1cnJlbmN5U3RyaW5nKHtcclxuICAgIHZhbHVlOiBzdGF0ZS5jYXJ0RGV0YWlsc1tpZF0udmFsdWUsXHJcbiAgICBjdXJyZW5jeTogc3RhdGUuY3VycmVuY3ksXHJcbiAgICBsYW5ndWFnZTogc3RhdGUubGFuZ3VhZ2VcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlRm9ybWF0dGVkUHJpY2Uoc3RhdGUsIGlkKSB7XHJcbiAgc3RhdGUuY2FydERldGFpbHNbaWRdLmZvcm1hdHRlZFByaWNlID0gZm9ybWF0Q3VycmVuY3lTdHJpbmcoe1xyXG4gICAgdmFsdWU6IHN0YXRlLmNhcnREZXRhaWxzW2lkXS5wcmljZSxcclxuICAgIGN1cnJlbmN5OiBzdGF0ZS5jdXJyZW5jeSxcclxuICAgIGxhbmd1YWdlOiBzdGF0ZS5sYW5ndWFnZVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBFbnRyeSh7IGlkLCBwcm9kdWN0LCBxdWFudGl0eSwgcHJpY2VfbWV0YWRhdGEsIHByb2R1Y3RfbWV0YWRhdGEgfSkge1xyXG4gIHJldHVybiB7XHJcbiAgICAuLi5wcm9kdWN0LFxyXG4gICAgaWQsXHJcbiAgICBxdWFudGl0eSxcclxuICAgIHZhbHVlOiBwcm9kdWN0LnByaWNlICogcXVhbnRpdHksXHJcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgLy8gYWRkIGEgdGltZXN0YW1wIGluIElTTyA4NjAxIGZvcm1hdFxyXG4gICAgcHJpY2VfZGF0YToge1xyXG4gICAgICAuLi5wcm9kdWN0LnByaWNlX2RhdGEsXHJcbiAgICAgIC4uLnByaWNlX21ldGFkYXRhXHJcbiAgICB9LFxyXG4gICAgcHJvZHVjdF9kYXRhOiB7XHJcbiAgICAgIC4uLnByb2R1Y3QucHJvZHVjdF9kYXRhLFxyXG4gICAgICAuLi5wcm9kdWN0X21ldGFkYXRhXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFbnRyeSh7XHJcbiAgc3RhdGUsXHJcbiAgaWQsXHJcbiAgcHJvZHVjdCxcclxuICBjb3VudCxcclxuICBwcmljZV9tZXRhZGF0YSxcclxuICBwcm9kdWN0X21ldGFkYXRhXHJcbn0pIHtcclxuICBjb25zdCBlbnRyeSA9IEVudHJ5KHtcclxuICAgIGlkLFxyXG4gICAgcHJvZHVjdCxcclxuICAgIHF1YW50aXR5OiBjb3VudCxcclxuICAgIHByaWNlX21ldGFkYXRhLFxyXG4gICAgcHJvZHVjdF9tZXRhZGF0YSxcclxuICAgIHRpbWVzdGFtcDogZGF0ZUZucy5mb3JtYXRJU08obmV3IERhdGUoKSlcclxuICB9KTtcclxuXHJcbiAgc3RhdGUuY2FydERldGFpbHNbaWRdID0gZW50cnk7XHJcbiAgdXBkYXRlRm9ybWF0dGVkVmFsdWUoc3RhdGUsIGlkKTtcclxuICB1cGRhdGVGb3JtYXR0ZWRQcmljZShzdGF0ZSwgaWQpO1xyXG5cclxuICBzdGF0ZS50b3RhbFByaWNlICs9IGVudHJ5LnZhbHVlO1xyXG4gIHN0YXRlLmNhcnRDb3VudCArPSBjb3VudDtcclxuICB1cGRhdGVGb3JtYXR0ZWRUb3RhbFByaWNlKHN0YXRlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlRW50cnkoe1xyXG4gIHN0YXRlLFxyXG4gIGlkLFxyXG4gIGNvdW50LFxyXG4gIHByaWNlX21ldGFkYXRhLFxyXG4gIHByb2R1Y3RfbWV0YWRhdGFcclxufSkge1xyXG4gIGNvbnN0IGVudHJ5ID0gc3RhdGUuY2FydERldGFpbHNbaWRdO1xyXG4gIGlmIChlbnRyeS5xdWFudGl0eSArIGNvdW50IDw9IDApIHJldHVybiByZW1vdmVFbnRyeSh7IHN0YXRlLCBpZCB9KVxyXG5cclxuICBzdGF0ZS5jYXJ0RGV0YWlsc1tpZF0gPSBFbnRyeSh7XHJcbiAgICBpZCxcclxuICAgIHN0YXRlLFxyXG4gICAgcHJvZHVjdDogZW50cnksXHJcbiAgICBxdWFudGl0eTogZW50cnkucXVhbnRpdHkgKyBjb3VudCxcclxuICAgIHByaWNlX21ldGFkYXRhLFxyXG4gICAgcHJvZHVjdF9tZXRhZGF0YVxyXG4gIH0pO1xyXG4gIHVwZGF0ZUZvcm1hdHRlZFZhbHVlKHN0YXRlLCBpZCk7XHJcblxyXG4gIHN0YXRlLnRvdGFsUHJpY2UgKz0gZW50cnkucHJpY2UgKiBjb3VudDtcclxuICBzdGF0ZS5jYXJ0Q291bnQgKz0gY291bnQ7XHJcbiAgdXBkYXRlRm9ybWF0dGVkVG90YWxQcmljZShzdGF0ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUVudHJ5KHsgc3RhdGUsIGlkIH0pIHtcclxuICBjb25zdCBjYXJ0RGV0YWlscyA9IHN0YXRlLmNhcnREZXRhaWxzO1xyXG4gIHN0YXRlLnRvdGFsUHJpY2UgLT0gY2FydERldGFpbHNbaWRdLnZhbHVlO1xyXG4gIHN0YXRlLmNhcnRDb3VudCAtPSBjYXJ0RGV0YWlsc1tpZF0ucXVhbnRpdHk7XHJcbiAgZGVsZXRlIGNhcnREZXRhaWxzW2lkXTtcclxuICB1cGRhdGVGb3JtYXR0ZWRUb3RhbFByaWNlKHN0YXRlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUXVhbnRpdHkoeyBzdGF0ZSwgaWQsIHF1YW50aXR5IH0pIHtcclxuICBjb25zdCBlbnRyeSA9IHN0YXRlLmNhcnREZXRhaWxzW2lkXTtcclxuICB1cGRhdGVFbnRyeSh7XHJcbiAgICBzdGF0ZSxcclxuICAgIGlkLFxyXG4gICAgY291bnQ6IHF1YW50aXR5IC0gZW50cnkucXVhbnRpdHlcclxuICB9KTtcclxufVxuXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7XHJcbiAgY2FydE1vZGU6ICdjaGVja291dC1zZXNzaW9uJyxcclxuICBtb2RlOiAncGF5bWVudCcsXHJcbiAgY3VycmVuY3k6ICdVU0QnLFxyXG4gIGxhbmd1YWdlOiBpc0NsaWVudCA/IG5hdmlnYXRvci5sYW5ndWFnZSA6ICdlbi1VUycsXHJcbiAgbGFzdENsaWNrZWQ6ICcnLFxyXG4gIHNob3VsZERpc3BsYXlDYXJ0OiBmYWxzZSxcclxuICBjYXJ0Q291bnQ6IDAsXHJcbiAgdG90YWxQcmljZTogMCxcclxuICBmb3JtYXR0ZWRUb3RhbFByaWNlOiAnJyxcclxuICBjYXJ0RGV0YWlsczoge30sXHJcbiAgc3RyaXBlOiAnJyxcclxuICBzaG91bGRQZXJzaXN0OiB0cnVlXHJcbn07XHJcblxyXG5jb25zdCBzbGljZSA9IHRvb2xraXQuY3JlYXRlU2xpY2Uoe1xyXG4gIG5hbWU6ICdjYXJ0JyxcclxuICBpbml0aWFsU3RhdGUsXHJcbiAgcmVkdWNlcnM6IHtcclxuICAgIGFkZEl0ZW06IHtcclxuICAgICAgcmVkdWNlcihzdGF0ZSwgeyBwYXlsb2FkOiB7IHByb2R1Y3QsIG9wdGlvbnMgfSB9KSB7XHJcbiAgICAgICAgY29uc3QgeyBjb3VudCwgcHJpY2VfbWV0YWRhdGEsIHByb2R1Y3RfbWV0YWRhdGEgfSA9IG9wdGlvbnM7XHJcblxyXG4gICAgICAgIGNvbnN0IGlkID1cclxuICAgICAgICAgIHByb2R1Y3QuaWQgfHxcclxuICAgICAgICAgIHByb2R1Y3QucHJpY2VfaWQgfHxcclxuICAgICAgICAgIHByb2R1Y3Quc2t1X2lkIHx8XHJcbiAgICAgICAgICBwcm9kdWN0LnNrdSB8fFxyXG4gICAgICAgICAgdXVpZC52NCgpO1xyXG5cclxuICAgICAgICBpZiAoaWQgaW4gc3RhdGUuY2FydERldGFpbHMpIHtcclxuICAgICAgICAgIHVwZGF0ZUVudHJ5KHtcclxuICAgICAgICAgICAgc3RhdGUsXHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBjb3VudCxcclxuICAgICAgICAgICAgcHJpY2VfbWV0YWRhdGEsXHJcbiAgICAgICAgICAgIHByb2R1Y3RfbWV0YWRhdGFcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjcmVhdGVFbnRyeSh7XHJcbiAgICAgICAgICAgIHN0YXRlLFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgcHJvZHVjdCxcclxuICAgICAgICAgICAgY291bnQsXHJcbiAgICAgICAgICAgIHByaWNlX21ldGFkYXRhLFxyXG4gICAgICAgICAgICBwcm9kdWN0X21ldGFkYXRhXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHByZXBhcmUocHJvZHVjdCwgb3B0aW9ucyA9IHsgY291bnQ6IDEgfSkge1xyXG4gICAgICAgIGlmICghb3B0aW9ucy5wcmljZV9tZXRhZGF0YSkgb3B0aW9ucy5wcmljZV9tZXRhZGF0YSA9IHt9O1xyXG4gICAgICAgIGlmICghb3B0aW9ucy5wcm9kdWN0X21ldGFkYXRhKSBvcHRpb25zLnByb2R1Y3RfbWV0YWRhdGEgPSB7fTtcclxuICAgICAgICBpZiAoIW9wdGlvbnMuY291bnQpIG9wdGlvbnMuY291bnQgPSAxO1xyXG4gICAgICAgIHJldHVybiB7IHBheWxvYWQ6IHsgcHJvZHVjdCwgb3B0aW9ucyB9IH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGluY3JlbWVudEl0ZW06IHtcclxuICAgICAgcmVkdWNlcihzdGF0ZSwgeyBwYXlsb2FkOiB7IGlkLCBvcHRpb25zIH0gfSkge1xyXG4gICAgICAgIHVwZGF0ZUVudHJ5KHtcclxuICAgICAgICAgIHN0YXRlLFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICBjb3VudDogb3B0aW9ucy5jb3VudFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBwcmVwYXJlKGlkLCBvcHRpb25zID0geyBjb3VudDogMSB9KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgcGF5bG9hZDogeyBpZCwgb3B0aW9ucyB9IH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGRlY3JlbWVudEl0ZW06IHtcclxuICAgICAgcmVkdWNlcihzdGF0ZSwgeyBwYXlsb2FkOiB7IGlkLCBvcHRpb25zIH0gfSkge1xyXG4gICAgICAgIGlmIChzdGF0ZS5jYXJ0RGV0YWlsc1tpZF0ucXVhbnRpdHkgLSBvcHRpb25zLmNvdW50IDw9IDApXHJcbiAgICAgICAgICByZXR1cm4gcmVtb3ZlRW50cnkoeyBzdGF0ZSwgaWQgfSlcclxuXHJcbiAgICAgICAgdXBkYXRlRW50cnkoe1xyXG4gICAgICAgICAgc3RhdGUsXHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIGNvdW50OiAtb3B0aW9ucy5jb3VudFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBwcmVwYXJlKGlkLCBvcHRpb25zID0geyBjb3VudDogMSB9KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgcGF5bG9hZDogeyBpZCwgb3B0aW9ucyB9IH1cclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNsZWFyQ2FydDoge1xyXG4gICAgICByZWR1Y2VyKHN0YXRlKSB7XHJcbiAgICAgICAgc3RhdGUuY2FydENvdW50ID0gMDtcclxuICAgICAgICBzdGF0ZS50b3RhbFByaWNlID0gMDtcclxuICAgICAgICBzdGF0ZS5jYXJ0RGV0YWlscyA9IHt9O1xyXG4gICAgICAgIHVwZGF0ZUZvcm1hdHRlZFRvdGFsUHJpY2Uoc3RhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2V0SXRlbVF1YW50aXR5OiB7XHJcbiAgICAgIHJlZHVjZXIoc3RhdGUsIHsgcGF5bG9hZDogeyBpZCwgcXVhbnRpdHkgfSB9KSB7XHJcbiAgICAgICAgaWYgKHF1YW50aXR5ID4gMCAmJiBpZCBpbiBzdGF0ZS5jYXJ0RGV0YWlscylcclxuICAgICAgICAgIHJldHVybiB1cGRhdGVRdWFudGl0eSh7IC4uLnN0YXRlLCBzdGF0ZSwgaWQsIHF1YW50aXR5IH0pXHJcbiAgICAgICAgZWxzZSBpZiAocXVhbnRpdHkgPT09IDApIHJldHVybiByZW1vdmVFbnRyeSh7IHN0YXRlLCBpZCB9KVxyXG4gICAgICB9LFxyXG4gICAgICBwcmVwYXJlKGlkLCBxdWFudGl0eSkge1xyXG4gICAgICAgIHJldHVybiB7IHBheWxvYWQ6IHsgaWQsIHF1YW50aXR5IH0gfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlSXRlbToge1xyXG4gICAgICByZWR1Y2VyKHN0YXRlLCB7IHBheWxvYWQ6IHsgaWQgfSB9KSB7XHJcbiAgICAgICAgcmVtb3ZlRW50cnkoeyBzdGF0ZSwgaWQgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHByZXBhcmUoaWQpIHtcclxuICAgICAgICByZXR1cm4geyBwYXlsb2FkOiB7IGlkIH0gfVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgbG9hZENhcnQ6IHtcclxuICAgICAgcmVkdWNlcihzdGF0ZSwgeyBwYXlsb2FkOiB7IGNhcnREZXRhaWxzLCBzaG91bGRNZXJnZSB9IH0pIHtcclxuICAgICAgICBpZiAoIXNob3VsZE1lcmdlKSB7XHJcbiAgICAgICAgICBzdGF0ZS5jYXJ0Q291bnQgPSAwO1xyXG4gICAgICAgICAgc3RhdGUudG90YWxQcmljZSA9IDA7XHJcbiAgICAgICAgICBzdGF0ZS5jYXJ0RGV0YWlscyA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBpZCBpbiBjYXJ0RGV0YWlscykge1xyXG4gICAgICAgICAgY29uc3QgZW50cnkgPSBjYXJ0RGV0YWlsc1tpZF07XHJcbiAgICAgICAgICBjcmVhdGVFbnRyeSh7XHJcbiAgICAgICAgICAgIHN0YXRlLFxyXG4gICAgICAgICAgICBpZDogZW50cnkuaWQsXHJcbiAgICAgICAgICAgIHByb2R1Y3Q6IGVudHJ5LFxyXG4gICAgICAgICAgICBjb3VudDogZW50cnkucXVhbnRpdHlcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgcHJlcGFyZShjYXJ0RGV0YWlscywgc2hvdWxkTWVyZ2UgPSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgcGF5bG9hZDogeyBjYXJ0RGV0YWlscywgc2hvdWxkTWVyZ2UgfSB9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBoYW5kbGVDYXJ0SG92ZXIoc3RhdGUpIHtcclxuICAgICAgc3RhdGUuc2hvdWxkRGlzcGxheUNhcnQgPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZUNhcnRDbGljayhzdGF0ZSkge1xyXG4gICAgICBzdGF0ZS5zaG91bGREaXNwbGF5Q2FydCA9ICFzdGF0ZS5zaG91bGREaXNwbGF5Q2FydDtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVDbG9zZUNhcnQoc3RhdGUpIHtcclxuICAgICAgc3RhdGUuc2hvdWxkRGlzcGxheUNhcnQgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBzdG9yZUxhc3RDbGlja2VkKHN0YXRlLCB7IHBheWxvYWQgfSkge1xyXG4gICAgICBzdGF0ZS5sYXN0Q2xpY2tlZCA9IHBheWxvYWQ7XHJcbiAgICB9LFxyXG4gICAgY2hhbmdlU3RyaXBlS2V5KHN0YXRlLCB7IHBheWxvYWQgfSkge1xyXG4gICAgICBzdGF0ZS5zdHJpcGUgPSBwYXlsb2FkO1xyXG4gICAgfSxcclxuICAgIGNoYW5nZUxhbmd1YWdlKHN0YXRlLCB7IHBheWxvYWQgfSkge1xyXG4gICAgICBzdGF0ZS5sYW5ndWFnZSA9IHBheWxvYWQ7XHJcbiAgICB9LFxyXG4gICAgY2hhbmdlQ3VycmVuY3koc3RhdGUsIHsgcGF5bG9hZCB9KSB7XHJcbiAgICAgIHN0YXRlLmN1cnJlbmN5ID0gcGF5bG9hZDtcclxuICAgIH1cclxuICB9XHJcbn0pO1xyXG5cclxuc2xpY2UuYWN0aW9ucy5yZWRpcmVjdFRvQ2hlY2tvdXQgPSAoc2Vzc2lvbklkKSA9PiAoe1xyXG4gIHR5cGU6ICdjYXJ0L3JlZGlyZWN0VG9DaGVja291dCcsXHJcbiAgcGF5bG9hZDogeyBzZXNzaW9uSWQgfVxyXG59KTtcclxuc2xpY2UuYWN0aW9ucy5jaGVja291dFNpbmdsZUl0ZW0gPSAoaXRlbXNPclByaWNlSWQpID0+IHtcclxuICBjb25zdCBxdWFudGl0eSA9IGl0ZW1zT3JQcmljZUlkLnF1YW50aXR5IHx8IDE7XHJcblxyXG4gIGNvbnN0IGNhcnRJdGVtcyA9ICgoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIGl0ZW1zT3JQcmljZUlkID09PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGxpbmVJdGVtczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBwcmljZTogaXRlbXNPclByaWNlSWQsXHJcbiAgICAgICAgICAgIHF1YW50aXR5XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGl0ZW1zT3JQcmljZUlkLCAncHJpY2UnKSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGxpbmVJdGVtczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBwcmljZTogaXRlbXNPclByaWNlSWQucHJpY2UsXHJcbiAgICAgICAgICAgIHF1YW50aXR5XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEJhY2t3YXJkIGNvbXBhdGliaWxpdHkgKFNLVSlcclxuICAgICAqL1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpdGVtc09yUHJpY2VJZCwgJ3NrdScpKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgc2t1OiBpdGVtc09yUHJpY2VJZC5za3UsXHJcbiAgICAgICAgICAgIHF1YW50aXR5XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW11cclxuICB9KSgpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdHlwZTogJ2NhcnQvY2hlY2tvdXRTaW5nbGVJdGVtJyxcclxuICAgIHBheWxvYWQ6IHtcclxuICAgICAgY2FydEl0ZW1zXHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgeyByZWR1Y2VyLCBhY3Rpb25zIH0gPSBzbGljZTtcblxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGNvbnN0cnVjdG9yIG5hbWUgb2YgYW55IHZhbHVlLlxyXG4gKiBAcGFyYW0ge2FueX0gdmFsdWVcclxuICogQHJldHVybnMgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiB0eXBlT2YodmFsdWUpIHtcclxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICd1bmRlZmluZWQnXHJcbiAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gJ251bGwnXHJcbiAgcmV0dXJuIHZhbHVlLmNvbnN0cnVjdG9yLm5hbWVcclxufVxyXG5cclxuY2xhc3MgUHJvcGVydHlWYWx1ZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gIGNvbnN0cnVjdG9yKHsgcHJvcGVydHksIG1ldGhvZCwgZXhwZWN0ZWQsIHJlY2VpdmVkIH0pIHtcclxuICAgIGNvbnN0IHBsdXJhbCA9IEFycmF5LmlzQXJyYXkoZXhwZWN0ZWQpO1xyXG4gICAgY29uc3QgZXhwZWN0ZWRTdHJpbmcgPSBwbHVyYWxcclxuICAgICAgPyBgYXJlICR7ZXhwZWN0ZWQubWFwKCh2KSA9PiBKU09OLnN0cmluZ2lmeSh2KSkuam9pbignLCAnKX1gXHJcbiAgICAgIDogYGlzICR7SlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWQpfWA7XHJcbiAgICBjb25zdCBtZXRob2RTdHJpbmcgPSB0eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJyA/IGAgaW4gJHttZXRob2R9KClgIDogJyc7XHJcbiAgICBzdXBlcihcclxuICAgICAgYEludmFsaWQgdmFsdWUgJHtKU09OLnN0cmluZ2lmeShcclxuICAgICAgICByZWNlaXZlZFxyXG4gICAgICApfSB3YXMgcmVjZWl2ZWQgZm9yICR7cHJvcGVydHl9LiBWYWxpZCAke1xyXG4gICAgICAgIHBsdXJhbCA/ICd2YWx1ZXMnIDogJ3ZhbHVlJ1xyXG4gICAgICB9IGZvciAke3Byb3BlcnR5fSR7bWV0aG9kU3RyaW5nfSAke2V4cGVjdGVkU3RyaW5nfS5gXHJcbiAgICApO1xyXG4gICAgdGhpcy5uYW1lID0gJ1Byb3BlcnR5VmFsdWVFcnJvcic7XHJcbiAgfVxyXG59XHJcblxyXG5jbGFzcyBQcm9wZXJ0eVR5cGVFcnJvciBleHRlbmRzIFR5cGVFcnJvciB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9wZXJ0eSwgZXhwZWN0ZWQsIHJlY2VpdmVkIH0pIHtcclxuICAgIGNvbnN0IHBsdXJhbCA9IEFycmF5LmlzQXJyYXkoZXhwZWN0ZWQpO1xyXG4gICAgY29uc3QgZXhwZWN0ZWRTdHJpbmcgPSBwbHVyYWxcclxuICAgICAgPyBgYXJlICR7ZXhwZWN0ZWQubWFwKCh2KSA9PiBKU09OLnN0cmluZ2lmeSh2KSkuam9pbignLCAnKX1gXHJcbiAgICAgIDogYGlzICR7SlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWQpfWA7XHJcbiAgICBzdXBlcihcclxuICAgICAgYEludmFsaWQgdmFsdWUgd2l0aCB0eXBlICR7SlNPTi5zdHJpbmdpZnkoXHJcbiAgICAgICAgcmVjZWl2ZWRcclxuICAgICAgKX0gd2FzIHJlY2VpdmVkIGZvciAke3Byb3BlcnR5fS4gVmFsaWQgJHtcclxuICAgICAgICBwbHVyYWwgPyAndHlwZXMnIDogJ3R5cGUnXHJcbiAgICAgIH0gZm9yICR7cHJvcGVydHl9ICR7ZXhwZWN0ZWRTdHJpbmd9LmBcclxuICAgICk7XHJcbiAgICB0aGlzLm5hbWUgPSAnUHJvcGVydHlUeXBlRXJyb3InO1xyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgUHJvcGVydHlSYW5nZUVycm9yIGV4dGVuZHMgUmFuZ2VFcnJvciB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9wZXJ0eSwgYmV0d2VlbiwgYmVsb3csIGFib3ZlLCByZWNlaXZlZCB9KSB7XHJcbiAgICBsZXQgZXhwZWN0ZWRTdHJpbmc7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZXR3ZWVuKSlcclxuICAgICAgZXhwZWN0ZWRTdHJpbmcgPSBgYmV0d2VlbiAke2JldHdlZW5bMF19IGFuZCAke2JldHdlZW5bMV19YDtcclxuICAgIGVsc2UgaWYgKFsnc3RyaW5nJywgJ251bWJlciddLmluY2x1ZGVzKHR5cGVvZiBiZWxvdykpXHJcbiAgICAgIGV4cGVjdGVkU3RyaW5nID0gYGJlbG93ICR7YmVsb3d9YDtcclxuICAgIGVsc2UgaWYgKFsnc3RyaW5nJywgJ251bWJlciddLmluY2x1ZGVzKHR5cGVvZiBhYm92ZSkpXHJcbiAgICAgIGV4cGVjdGVkU3RyaW5nID0gYGFib3ZlICR7YWJvdmV9YDtcclxuXHJcbiAgICBzdXBlcihcclxuICAgICAgYEludmFsaWQgdmFsdWUgJHtKU09OLnN0cmluZ2lmeShcclxuICAgICAgICByZWNlaXZlZFxyXG4gICAgICApfSB3YXMgcmVjZWl2ZWQgZm9yICR7cHJvcGVydHl9LiBWYWxpZCByYW5nZSBmb3IgJHtwcm9wZXJ0eX0gaXMgJHtleHBlY3RlZFN0cmluZ30uYFxyXG4gICAgKTtcclxuICAgIHRoaXMubmFtZSA9ICdQcm9wZXJ0eVJhbmdlRXJyb3InO1xyXG4gIH1cclxufVxuXG5mdW5jdGlvbiBfb3B0aW9uYWxDaGFpbihvcHMpIHsgbGV0IGxhc3RBY2Nlc3NMSFMgPSB1bmRlZmluZWQ7IGxldCB2YWx1ZSA9IG9wc1swXTsgbGV0IGkgPSAxOyB3aGlsZSAoaSA8IG9wcy5sZW5ndGgpIHsgY29uc3Qgb3AgPSBvcHNbaV07IGNvbnN0IGZuID0gb3BzW2kgKyAxXTsgaSArPSAyOyBpZiAoKG9wID09PSAnb3B0aW9uYWxBY2Nlc3MnIHx8IG9wID09PSAnb3B0aW9uYWxDYWxsJykgJiYgdmFsdWUgPT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGlmIChvcCA9PT0gJ2FjY2VzcycgfHwgb3AgPT09ICdvcHRpb25hbEFjY2VzcycpIHsgbGFzdEFjY2Vzc0xIUyA9IHZhbHVlOyB2YWx1ZSA9IGZuKHZhbHVlKTsgfSBlbHNlIGlmIChvcCA9PT0gJ2NhbGwnIHx8IG9wID09PSAnb3B0aW9uYWxDYWxsJykgeyB2YWx1ZSA9IGZuKCguLi5hcmdzKSA9PiB2YWx1ZS5jYWxsKGxhc3RBY2Nlc3NMSFMsIC4uLmFyZ3MpKTsgbGFzdEFjY2Vzc0xIUyA9IHVuZGVmaW5lZDsgfSB9IHJldHVybiB2YWx1ZTsgfVxyXG5mdW5jdGlvbiBnZXRDaGVja291dERhdGEoY2FydCkge1xyXG4gIGNvbnN0IGxpbmVJdGVtcyA9IFtdO1xyXG4gIGZvciAoY29uc3Qgc2t1IGluIGNhcnQuY2FydERldGFpbHMpXHJcbiAgICBsaW5lSXRlbXMucHVzaCh7IHByaWNlOiBza3UsIHF1YW50aXR5OiBjYXJ0LmNhcnREZXRhaWxzW3NrdV0ucXVhbnRpdHkgfSk7XHJcblxyXG4gIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICBtb2RlOiBjYXJ0Lm1vZGUsXHJcbiAgICBsaW5lSXRlbXMsXHJcbiAgICBzdWNjZXNzVXJsOiBjYXJ0LnN1Y2Nlc3NVcmwsXHJcbiAgICBjYW5jZWxVcmw6IGNhcnQuY2FuY2VsVXJsLFxyXG4gICAgYmlsbGluZ0FkZHJlc3NDb2xsZWN0aW9uOiBjYXJ0LmJpbGxpbmdBZGRyZXNzQ29sbGVjdGlvblxyXG4gICAgICA/ICdyZXF1aXJlZCdcclxuICAgICAgOiAnYXV0bycsXHJcbiAgICBzdWJtaXRUeXBlOiAnYXV0bydcclxuICB9O1xyXG5cclxuICBpZiAoX29wdGlvbmFsQ2hhaW4oW2NhcnQsICdhY2Nlc3MnLCBfID0+IF8uYWxsb3dlZENvdW50cmllcywgJ29wdGlvbmFsQWNjZXNzJywgXzIgPT4gXzIubGVuZ3RoXSkpIHtcclxuICAgIG9wdGlvbnMuc2hpcHBpbmdBZGRyZXNzQ29sbGVjdGlvbiA9IHtcclxuICAgICAgYWxsb3dlZENvdW50cmllczogY2FydC5hbGxvd2VkQ291bnRyaWVzXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG9wdGlvbnNcclxufVxyXG5cclxuY29uc3QgaGFuZGxlU3RyaXBlID0gKHN0b3JlKSA9PiAobmV4dCkgPT4gYXN5bmMgKGFjdGlvbikgPT4ge1xyXG4gIGNvbnN0IHN0cmlwZVB1YmxpY0tleSA9IHN0b3JlLmdldFN0YXRlKCkuc3RyaXBlO1xyXG4gIGNvbnN0IGNhcnQgPSBzdG9yZS5nZXRTdGF0ZSgpO1xyXG5cclxuICBjb25zdCBjaGVja291dCA9IFsnY2FydC9yZWRpcmVjdFRvQ2hlY2tvdXQnLCAnY2FydC9jaGVja291dFNpbmdsZUl0ZW0nXTtcclxuICBpZiAoY2hlY2tvdXQuaW5jbHVkZXMoYWN0aW9uLnR5cGUpKSB7XHJcbiAgICBpZiAodHlwZW9mIHN0cmlwZVB1YmxpY0tleSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhyb3cgbmV3IFByb3BlcnR5VHlwZUVycm9yKHtcclxuICAgICAgICBwcm9wZXJ0eTogJ3N0cmlwZScsXHJcbiAgICAgICAgZXhwZWN0ZWQ6ICdzdHJpbmcnLFxyXG4gICAgICAgIHJlY2VpdmVkOiB0eXBlT2Yoc3RyaXBlUHVibGljS2V5KVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIGlmIChzdHJpcGVQdWJsaWNLZXkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBQcm9wZXJ0eVJhbmdlRXJyb3Ioe1xyXG4gICAgICAgIHByb3BlcnR5OiAnc3RyaXBlLmxlbmd0aCcsXHJcbiAgICAgICAgYWJvdmU6IDAsXHJcbiAgICAgICAgcmVjZWl2ZWQ6IHN0cmlwZVB1YmxpY0tleS5sZW5ndGhcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChhY3Rpb24udHlwZSA9PT0gJ2NhcnQvcmVkaXJlY3RUb0NoZWNrb3V0Jykge1xyXG4gICAgY29uc3Qgc3RyaXBlID0gaW5pdGlhbGl6ZVN0cmlwZShzdHJpcGVQdWJsaWNLZXkpO1xyXG4gICAgaWYgKGNhcnQuY2FydE1vZGUgPT09ICdjaGVja291dC1zZXNzaW9uJykge1xyXG4gICAgICByZXR1cm4gc3RyaXBlLnJlZGlyZWN0VG9DaGVja291dCh7XHJcbiAgICAgICAgc2Vzc2lvbklkOiBhY3Rpb24ucGF5bG9hZC5zZXNzaW9uSWRcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSBpZiAoY2FydC5jYXJ0TW9kZSA9PT0gJ2NsaWVudC1vbmx5Jykge1xyXG4gICAgICBjb25zdCBjaGVja291dERhdGEgPSBnZXRDaGVja291dERhdGEoY2FydCk7XHJcbiAgICAgIHJldHVybiBzdHJpcGUucmVkaXJlY3RUb0NoZWNrb3V0KGNoZWNrb3V0RGF0YSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBQcm9wZXJ0eVZhbHVlRXJyb3Ioe1xyXG4gICAgICAgIHByb3BlcnR5OiAnY2FydE1vZGUnLFxyXG4gICAgICAgIG1ldGhvZDogJ3JlZGlyZWN0VG9DaGVja291dCcsXHJcbiAgICAgICAgZXhwZWN0ZWQ6IFsnY2xpZW50LW9ubHknLCAnY2hlY2tvdXQtc2Vzc2lvbiddLFxyXG4gICAgICAgIHJlY2VpdmVkOiBjYXJ0LmNhcnRNb2RlXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChhY3Rpb24udHlwZSA9PT0gJ2NhcnQvY2hlY2tvdXRTaW5nbGVJdGVtJykge1xyXG4gICAgY29uc3Qgc3RyaXBlID0gaW5pdGlhbGl6ZVN0cmlwZShzdHJpcGVQdWJsaWNLZXkpO1xyXG5cclxuICAgIGlmIChjYXJ0LmNhcnRNb2RlID09PSAnY2xpZW50LW9ubHknKSB7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgbW9kZTogY2FydC5tb2RlLFxyXG4gICAgICAgIHN1Y2Nlc3NVcmw6IGNhcnQuc3VjY2Vzc1VybCxcclxuICAgICAgICBjYW5jZWxVcmw6IGNhcnQuY2FuY2VsVXJsLFxyXG4gICAgICAgIC4uLmFjdGlvbi5wYXlsb2FkLmNhcnRJdGVtc1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gc3RyaXBlLnJlZGlyZWN0VG9DaGVja291dChvcHRpb25zKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IFByb3BlcnR5VmFsdWVFcnJvcih7XHJcbiAgICAgICAgcHJvcGVydHk6ICdjYXJ0TW9kZScsXHJcbiAgICAgICAgbWV0aG9kOiAnY2hlY2tvdXRTaW5nbGVJdGVtJyxcclxuICAgICAgICBleHBlY3RlZDogJ2NsaWVudC1vbmx5JyxcclxuICAgICAgICByZWNlaXZlZDogY2FydC5jYXJ0TW9kZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG5leHQoYWN0aW9uKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZVN0cmlwZShwdWJsaWNLZXkpIHtcclxuICB0cnkge1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXHJcbiAgICBjb25zdCBzdHJpcGUgPSBTdHJpcGUocHVibGljS2V5KTtcclxuICAgIHN0cmlwZS5yZWdpc3RlckFwcEluZm8oe1xyXG4gICAgICBuYW1lOiAndXNlLXNob3BwaW5nLWNhcnQnLFxyXG4gICAgICB2ZXJzaW9uOiBcIjMuMi4wXCIsXHJcbiAgICAgIHVybDogJ2h0dHBzOi8vdXNlc2hvcHBpbmdjYXJ0LmNvbScsXHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcclxuICAgICAgcGFydG5lcl9pZDogJ3BwX3BhcnRuZXJfSDhNTG1JM2U5T2MzSUsnXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdHJpcGVcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGluaXRpYWxpemUgU3RyaXBlLicpO1xyXG4gICAgdGhyb3cgZXJyb3JcclxuICB9XHJcbn1cblxuY29uc3QgaGFuZGxlV2FybmluZ3MgPSAoc3RvcmUpID0+IChuZXh0KSA9PiBhc3luYyAoYWN0aW9uKSA9PiB7XHJcbiAgY29uc3QgY291bnQgPSBbJ2NhcnQvYWRkSXRlbScsICdjYXJ0L2luY3JlbWVudEl0ZW0nLCAnY2FydC9kZWNyZW1lbnRJdGVtJ107XHJcbiAgaWYgKFxyXG4gICAgY291bnQuaW5jbHVkZXMoYWN0aW9uLnR5cGUpICYmXHJcbiAgICB0eXBlb2YgYWN0aW9uLnBheWxvYWQub3B0aW9ucy5jb3VudCAhPT0gJ251bWJlcidcclxuICApIHtcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgYEludmFsaWQgY291bnQgdXNlZCB3aXRoIGFjdGlvbiAke1xyXG4gICAgICAgIGFjdGlvbi50eXBlXHJcbiAgICAgIH06IGNvdW50IG11c3QgYmUgYSBudW1iZXIuIFRoZSBjdXJyZW50IHR5cGUgaXMgJHt0eXBlT2YoXHJcbiAgICAgICAgYWN0aW9uLnBheWxvYWQub3B0aW9ucy5jb3VudFxyXG4gICAgICApfS5gLFxyXG4gICAgICBhY3Rpb25cclxuICAgICk7XHJcbiAgICByZXR1cm5cclxuICB9XHJcblxyXG4gIGNvbnN0IHF1YW50aXR5ID0gWydjYXJ0L3NldEl0ZW1RdWFudGl0eSddO1xyXG4gIGlmIChxdWFudGl0eS5pbmNsdWRlcyhhY3Rpb24udHlwZSkpIHtcclxuICAgIGlmICh0eXBlb2YgYWN0aW9uLnBheWxvYWQucXVhbnRpdHkgIT09ICdudW1iZXInKSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICBgSW52YWxpZCBxdWFudGl0eSB1c2VkIHdpdGggYWN0aW9uICR7XHJcbiAgICAgICAgICBhY3Rpb24udHlwZVxyXG4gICAgICAgIH06IHF1YW50aXR5IG11c3QgYmUgYSBudW1iZXIuIFRoZSBjdXJyZW50IHR5cGUgaXMgJHt0eXBlT2YoXHJcbiAgICAgICAgICBhY3Rpb24ucGF5bG9hZC5xdWFudGl0eVxyXG4gICAgICAgICl9LmAsXHJcbiAgICAgICAgYWN0aW9uXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfSBlbHNlIGlmIChhY3Rpb24ucGF5bG9hZC5xdWFudGl0eSA8IDApIHtcclxuICAgICAgY29uc29sZS53YXJuKFxyXG4gICAgICAgIGBJbnZhbGlkIHF1YW50aXR5IHVzZWQgd2l0aCBhY3Rpb24gJHtcclxuICAgICAgICAgIGFjdGlvbi50eXBlXHJcbiAgICAgICAgfTogcXVhbnRpdHkgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVyby4gVGhlIGN1cnJlbnQgdmFsdWUgaXMgJHtKU09OLnN0cmluZ2lmeShcclxuICAgICAgICAgIGFjdGlvbi5wYXlsb2FkLnF1YW50aXR5XHJcbiAgICAgICAgKX0uYCxcclxuICAgICAgICBhY3Rpb25cclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBpZCA9IFsnY2FydC9pbmNyZW1lbnRJdGVtJywgJ2NhcnQvZGVjcmVtZW50SXRlbScsICdjYXJ0L3JlbW92ZUl0ZW0nXTtcclxuICBpZiAoXHJcbiAgICBpZC5pbmNsdWRlcyhhY3Rpb24udHlwZSkgJiZcclxuICAgICEoYWN0aW9uLnBheWxvYWQuaWQgaW4gc3RvcmUuZ2V0U3RhdGUoKS5jYXJ0RGV0YWlscylcclxuICApIHtcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgYEludmFsaWQgcHJvZHVjdCBJRCB1c2VkIHdpdGggYWN0aW9uICR7XHJcbiAgICAgICAgYWN0aW9uLnR5cGVcclxuICAgICAgfTogdGhlIElEIG11c3QgYWxyZWFkeSBiZSBpbiB0aGUgY2FydC4gVGhlIGN1cnJlbnQgdmFsdWUgaXMgJHtKU09OLnN0cmluZ2lmeShcclxuICAgICAgICBhY3Rpb24ucGF5bG9hZC5pZFxyXG4gICAgICApfS5gLFxyXG4gICAgICBhY3Rpb25cclxuICAgICk7XHJcbiAgICByZXR1cm5cclxuICB9XHJcblxyXG4gIHJldHVybiBuZXh0KGFjdGlvbilcclxufTtcblxuZnVuY3Rpb24gX251bGxpc2hDb2FsZXNjZShsaHMsIHJoc0ZuKSB7IGlmIChsaHMgIT0gbnVsbCkgeyByZXR1cm4gbGhzOyB9IGVsc2UgeyByZXR1cm4gcmhzRm4oKTsgfSB9XHJcbmFzeW5jIGZ1bmN0aW9uIGZpbHRlckNhcnQoY2FydERldGFpbHMsIGZpbHRlcikge1xyXG4gIGNvbnN0IGZpbHRlcmVkQ2FydCA9IHt9O1xyXG5cclxuICBmb3IgKGNvbnN0IHNrdSBpbiBjYXJ0RGV0YWlscykge1xyXG4gICAgY29uc3QgZW50cnkgPSBjYXJ0RGV0YWlsc1tza3VdO1xyXG4gICAgaWYgKGF3YWl0IGZpbHRlcihlbnRyeSkpIGZpbHRlcmVkQ2FydFtza3VdID0gZW50cnk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZmlsdGVyZWRDYXJ0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vb3AoKSB7fVxyXG5mdW5jdGlvbiBjcmVhdGVOb29wU3RvcmFnZSgpIHtcclxuICByZXR1cm4ge1xyXG4gICAgZ2V0SXRlbTogbm9vcCxcclxuICAgIHNldEl0ZW06IG5vb3AsXHJcbiAgICByZW1vdmVJdGVtOiBub29wXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMb2NhbFN0b3JhZ2UoKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGFzeW5jIGdldEl0ZW0oa2V5KSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KVxyXG4gICAgfSxcclxuICAgIGFzeW5jIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpXHJcbiAgICB9LFxyXG4gICAgYXN5bmMgcmVtb3ZlSXRlbShrZXkpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTaG9wcGluZ0NhcnRTdG9yZShvcHRpb25zKSB7XHJcbiAgb3B0aW9ucy5zaG91bGRQZXJzaXN0ID0gX251bGxpc2hDb2FsZXNjZShvcHRpb25zLnNob3VsZFBlcnNpc3QsICgpID0+ICggdHJ1ZSkpO1xyXG5cclxuICBpZiAoIWlzQ2xpZW50KSB7XHJcbiAgICByZXR1cm4gdG9vbGtpdC5jb25maWd1cmVTdG9yZSh7XHJcbiAgICAgIHJlZHVjZXIsXHJcbiAgICAgIHByZWxvYWRlZFN0YXRlOiB7IC4uLmluaXRpYWxTdGF0ZSwgLi4ub3B0aW9ucyB9XHJcbiAgICB9KVxyXG4gIH1cclxuICBsZXQgc3RvcmFnZTtcclxuICBpZiAoaXNDbGllbnQpIHN0b3JhZ2UgPSBvcHRpb25zLnN0b3JhZ2UgfHwgY3JlYXRlTG9jYWxTdG9yYWdlKCk7XHJcbiAgZWxzZSBzdG9yYWdlID0gY3JlYXRlTm9vcFN0b3JhZ2UoKTtcclxuICBkZWxldGUgb3B0aW9ucy5zdG9yYWdlO1xyXG5cclxuICBjb25zdCBwZXJzaXN0Q29uZmlnID0ge1xyXG4gICAga2V5OiBfbnVsbGlzaENvYWxlc2NlKG9wdGlvbnMucGVyc2lzdEtleSwgKCkgPT4gKCAncm9vdCcpKSxcclxuICAgIHZlcnNpb246IDEsXHJcbiAgICBzdG9yYWdlLFxyXG4gICAgd2hpdGVsaXN0OiBbJ2NhcnRDb3VudCcsICd0b3RhbFByaWNlJywgJ2Zvcm1hdHRlZFRvdGFsUHJpY2UnLCAnY2FydERldGFpbHMnXVxyXG4gIH07XHJcbiAgY29uc3QgcGVyc2lzdGVkUmVkdWNlciA9IHJlZHV4UGVyc2lzdC5wZXJzaXN0UmVkdWNlcihwZXJzaXN0Q29uZmlnLCByZWR1Y2VyKTtcclxuXHJcbiAgY29uc3QgbmV3SW5pdGlhbFN0YXRlID0geyAuLi5pbml0aWFsU3RhdGUsIC4uLm9wdGlvbnMgfTtcclxuICB1cGRhdGVGb3JtYXR0ZWRUb3RhbFByaWNlKG5ld0luaXRpYWxTdGF0ZSk7XHJcblxyXG4gIHJldHVybiB0b29sa2l0LmNvbmZpZ3VyZVN0b3JlKHtcclxuICAgIHJlZHVjZXI6IG9wdGlvbnMuc2hvdWxkUGVyc2lzdCA/IHBlcnNpc3RlZFJlZHVjZXIgOiByZWR1Y2VyLFxyXG4gICAgcHJlbG9hZGVkU3RhdGU6IG5ld0luaXRpYWxTdGF0ZSxcclxuICAgIG1pZGRsZXdhcmU6IChnZXREZWZhdWx0TWlkZGxld2FyZSkgPT5cclxuICAgICAgZ2V0RGVmYXVsdE1pZGRsZXdhcmUoe1xyXG4gICAgICAgIHNlcmlhbGl6YWJsZUNoZWNrOiB7XHJcbiAgICAgICAgICBpZ25vcmVkQWN0aW9uczogW3JlZHV4UGVyc2lzdC5GTFVTSCwgcmVkdXhQZXJzaXN0LlJFSFlEUkFURSwgcmVkdXhQZXJzaXN0LlBBVVNFLCByZWR1eFBlcnNpc3QuUEVSU0lTVCwgcmVkdXhQZXJzaXN0LlBVUkdFLCByZWR1eFBlcnNpc3QuUkVHSVNURVJdLFxyXG4gICAgICAgICAgaWdub3JlZEFjdGlvblBhdGhzOiBbJ3BlcnNpc3QnXVxyXG4gICAgICAgIH1cclxuICAgICAgfSkuY29uY2F0KGhhbmRsZVN0cmlwZSwgaGFuZGxlV2FybmluZ3MpXHJcbiAgfSlcclxufVxuXG5jb25zdCBfanN4RmlsZU5hbWUgPSBcIi9Vc2Vycy9uaWNrZGVqZXN1cy9Db2RlL2hvb2tzL3VzZS1zaG9wcGluZy1jYXJ0L3VzZS1zaG9wcGluZy1jYXJ0L3JlYWN0L2luZGV4LmpzXCI7Y29uc3QgQ2FydENvbnRleHQgPSBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUNvbnRleHQoaW5pdGlhbFN0YXRlKTtcclxuY29uc3QgdXNlU2VsZWN0b3IgPSByZWFjdFJlZHV4LmNyZWF0ZVNlbGVjdG9ySG9vayhDYXJ0Q29udGV4dCk7XHJcbmNvbnN0IHVzZURpc3BhdGNoID0gcmVhY3RSZWR1eC5jcmVhdGVEaXNwYXRjaEhvb2soQ2FydENvbnRleHQpO1xyXG5cclxuZnVuY3Rpb24gQ2FydFByb3ZpZGVyKHsgbG9hZGluZyA9IG51bGwsIGNoaWxkcmVuLCAuLi5wcm9wcyB9KSB7XHJcbiAgY29uc3QgW2lzQ2xpZW50LCBzZXRJc0NsaWVudF0gPSBSZWFjdF9fbmFtZXNwYWNlLnVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgUmVhY3RfX25hbWVzcGFjZS51c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgc2V0SXNDbGllbnQodHJ1ZSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBzdG9yZSA9IFJlYWN0X19uYW1lc3BhY2UudXNlTWVtbygoKSA9PiBjcmVhdGVTaG9wcGluZ0NhcnRTdG9yZShwcm9wcyksIFtwcm9wc10pO1xyXG5cclxuICBpZiAocHJvcHMuc2hvdWxkUGVyc2lzdCAmJiBpc0NsaWVudCkge1xyXG4gICAgY29uc3QgcGVyc2lzdG9yID0gcmVkdXhQZXJzaXN0LnBlcnNpc3RTdG9yZShzdG9yZSk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgUmVhY3RfX25hbWVzcGFjZS5jcmVhdGVFbGVtZW50KHJlYWN0UmVkdXguUHJvdmlkZXIsIHsgY29udGV4dDogQ2FydENvbnRleHQsIHN0b3JlOiBzdG9yZSwgX19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDMzfX1cbiAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQocmVhY3QuUGVyc2lzdEdhdGUsIHsgcGVyc2lzdG9yOiBwZXJzaXN0b3IsIF9fc2VsZjogdGhpcywgX19zb3VyY2U6IHtmaWxlTmFtZTogX2pzeEZpbGVOYW1lLCBsaW5lTnVtYmVyOiAzNH19LCAoKSA9PiBjaGlsZHJlbilcbiAgICAgIClcclxuICAgIClcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgUmVhY3RfX25hbWVzcGFjZS5jcmVhdGVFbGVtZW50KHJlYWN0UmVkdXguUHJvdmlkZXIsIHsgY29udGV4dDogQ2FydENvbnRleHQsIHN0b3JlOiBzdG9yZSwgX19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDM5fX1cbiAgICAgICAgLCBjaGlsZHJlblxuICAgICAgKVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXNlU2hvcHBpbmdDYXJ0KFxyXG4gIHNlbGVjdG9yID0gKHN0YXRlKSA9PiAoeyAuLi5zdGF0ZSB9KSxcclxuICBlcXVhbGl0eUZuXHJcbikge1xyXG4gIGNvbnN0IGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcclxuICBjb25zdCBjYXJ0U3RhdGUgPSB1c2VTZWxlY3RvcihzZWxlY3RvciwgZXF1YWxpdHlGbik7XHJcblxyXG4gIGNvbnN0IHNob3BwaW5nQ2FydCA9IFJlYWN0X19uYW1lc3BhY2UudXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCBjYXJ0QWN0aW9ucyA9IHRvb2xraXQuYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbnMsIGRpc3BhdGNoKTtcclxuICAgIHJldHVybiB7IC4uLmNhcnRTdGF0ZSwgLi4uY2FydEFjdGlvbnMgfVxyXG4gIH0sIFtjYXJ0U3RhdGUsIGRpc3BhdGNoXSk7XHJcblxyXG4gIFJlYWN0X19uYW1lc3BhY2UudXNlRGVidWdWYWx1ZShzaG9wcGluZ0NhcnQpO1xyXG4gIHJldHVybiBzaG9wcGluZ0NhcnRcclxufVxyXG5cclxuZnVuY3Rpb24gRGVidWdDYXJ0KHByb3BzKSB7XHJcbiAgY29uc3QgY2FydCA9IHVzZVNob3BwaW5nQ2FydCgoc3RhdGUpID0+IHN0YXRlKTtcclxuICBjb25zdCBjYXJ0UHJvcGVydHlSb3dzID0gT2JqZWN0LmVudHJpZXMoY2FydClcclxuICAgIC5maWx0ZXIoKFssIHZhbHVlXSkgPT4gdHlwZW9mIHZhbHVlICE9PSAnZnVuY3Rpb24nKVxyXG4gICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoXHJcbiAgICAgIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndHInLCB7IGtleToga2V5LCBfX3NlbGY6IHRoaXMsIF9fc291cmNlOiB7ZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwgbGluZU51bWJlcjogNjd9fVxuICAgICAgICAsIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndGQnLCB7X19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDY4fX0sIGtleSlcbiAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ3RkJywge19fc2VsZjogdGhpcywgX19zb3VyY2U6IHtmaWxlTmFtZTogX2pzeEZpbGVOYW1lLCBsaW5lTnVtYmVyOiA2OX19XG4gICAgICAgICAgLCB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnID8gKFxyXG4gICAgICAgICAgICBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHsgb25DbGljazogKCkgPT4gY29uc29sZS5sb2codmFsdWUpLCBfX3NlbGY6IHRoaXMsIF9fc291cmNlOiB7ZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSwgbGluZU51bWJlcjogNzF9fSwgXCJMb2cgdmFsdWVcIiApXHJcbiAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh2YWx1ZSlcclxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKVxyXG4gICAgKSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgc3R5bGU6IHtcclxuICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcclxuICAgICAgICB0b3A6IDUwLFxyXG4gICAgICAgIHJpZ2h0OiA1MCxcclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZWVlJyxcclxuICAgICAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcclxuICAgICAgICBtYXhXaWR0aDogMzAwLFxyXG4gICAgICAgIHBhZGRpbmc6IDIwLFxyXG4gICAgICAgIGJvcmRlclNwYWNpbmc6ICcyNXB4IDVweCcsXHJcbiAgICAgICAgb3ZlcmZsb3c6ICdhdXRvJ1xyXG4gICAgICB9LFxyXG4gICAgICAuLi5wcm9wcywgX19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDgwfX1cclxuXG4gICAgICAsIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7X19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDk0fX1cbiAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJywge19fc2VsZjogdGhpcywgX19zb3VyY2U6IHtmaWxlTmFtZTogX2pzeEZpbGVOYW1lLCBsaW5lTnVtYmVyOiA5NX19XG4gICAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ3RyJywge19fc2VsZjogdGhpcywgX19zb3VyY2U6IHtmaWxlTmFtZTogX2pzeEZpbGVOYW1lLCBsaW5lTnVtYmVyOiA5Nn19XG4gICAgICAgICAgICAsIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndGgnLCB7X19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDk3fX0sIFwiS2V5XCIpXG4gICAgICAgICAgICAsIFJlYWN0X19uYW1lc3BhY2UuY3JlYXRlRWxlbWVudCgndGgnLCB7X19zZWxmOiB0aGlzLCBfX3NvdXJjZToge2ZpbGVOYW1lOiBfanN4RmlsZU5hbWUsIGxpbmVOdW1iZXI6IDk4fX0sIFwiVmFsdWVcIilcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICAgLCBSZWFjdF9fbmFtZXNwYWNlLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jywge19fc2VsZjogdGhpcywgX19zb3VyY2U6IHtmaWxlTmFtZTogX2pzeEZpbGVOYW1lLCBsaW5lTnVtYmVyOiAxMDF9fSwgY2FydFByb3BlcnR5Um93cylcbiAgICAgIClcbiAgICApXHJcbiAgKVxyXG59XG5cbmV4cG9ydHMuQ2FydENvbnRleHQgPSBDYXJ0Q29udGV4dDtcbmV4cG9ydHMuQ2FydFByb3ZpZGVyID0gQ2FydFByb3ZpZGVyO1xuZXhwb3J0cy5EZWJ1Z0NhcnQgPSBEZWJ1Z0NhcnQ7XG5leHBvcnRzLmFjdGlvbnMgPSBhY3Rpb25zO1xuZXhwb3J0cy5maWx0ZXJDYXJ0ID0gZmlsdGVyQ2FydDtcbmV4cG9ydHMuZm9ybWF0Q3VycmVuY3lTdHJpbmcgPSBmb3JtYXRDdXJyZW5jeVN0cmluZztcbmV4cG9ydHMudXNlRGlzcGF0Y2ggPSB1c2VEaXNwYXRjaDtcbmV4cG9ydHMudXNlU2VsZWN0b3IgPSB1c2VTZWxlY3RvcjtcbmV4cG9ydHMudXNlU2hvcHBpbmdDYXJ0ID0gdXNlU2hvcHBpbmdDYXJ0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3QuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/use-shopping-cart/dist/react.js\n");

/***/ })

};
;